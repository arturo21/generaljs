/*!
 * @pluginjs/events v0.7.16 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@pluginjs/is"),require("@pluginjs/utils"),require("@pluginjs/emitter")):"function"==typeof define&&define.amd?define(["exports","@pluginjs/is","@pluginjs/utils","@pluginjs/emitter"],t):t((e=e||self)["@pluginjs/events"]={},e["@pluginjs/is"],e["@pluginjs/utils"],e["@pluginjs/emitter"])}(this,(function(e,t,n,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}(this,u(t).call(this))).element=e,n.element._eventEmitter=c(n),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),n=t,i=[{key:"getEventEmitter",value:function(e){return e._eventEmitter||(e._eventEmitter=new this(e)),e._eventEmitter}}],(r=null)&&o(n.prototype,r),i&&o(n,i),t}(r=r&&r.hasOwnProperty("default")?r.default:r),l=function(e){return"object"===i(e)&&"addEventListener"in e},f=function(e){var t=void 0===e.namespace?e.type:"".concat(e.type,".").concat(e.namespace),n=s.getEventEmitter(e.currentTarget);e.detail?n.emit(t,e,e.detail):n.emit(t,e)},p=function(e,n,r,i,o){var u=s.getEventEmitter(i),a=s.parseEvent(e).eventName;u.hasListeners(e)||i.addEventListener(a,f,!1);var c=function(e,n,r,i){return function(e,o){var u,a=e.target,c=e.currentTarget||i,s=o?[e].concat(o):[e];if(t.isString(n))for(;a&&a!==c;)a.matches(n)&&(u=r.apply(a,s)),a=a.parentNode;else u=r.apply(c,s);!1===u&&(e.preventDefault(),e.stopPropagation())}}(0,n,r,i);r._delegator=c,o?u.once(e,c):u.on(e,c)},v=n.curryWith((function(e,n,r,i){var o=e.split(" ");if(o.length>1)o.forEach((function(e){v(e,n,r,i)}));else{t.isString(n)||t.isFunction(r)||(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0);var u=e,a=s.getEventEmitter(i),c=s.parseEvent(u).eventName;a.hasListeners(u)&&(0===a.getListeners(u).length&&i.removeEventListener(c,f),void 0===r?a.off(u):a.off(u,r._delegator))}return i}),l),g=n.curryWith((function(e,n,r,i){var o=e.split(" "),u=t.isString(n)?n.split(","):null;switch(!0){case Boolean(o.length>1):o.forEach((function(e){g(e,n,r,i)}));break;case Boolean(u&&u.length>1):u.forEach((function(t){g(e,t.trim(),r,i)}));break;default:t.isString(n)||t.isFunction(r)||(i=r,r=n,n=void 0),p(e,n,r,i)}return i}),l),m=n.curryWith((function(e,n,r,i){var o=e.split(" "),u=t.isString(n)?n.split(","):null;switch(!0){case Boolean(o.length>1):o.forEach((function(e){m(e,n,r,i)}));break;case Boolean(u&&u.length>1):u.forEach((function(t){m(e,t.trim(),r,i)}));break;default:t.isString(n)||t.isFunction(r)||(i=r,r=n,n=void 0);p(o[0],n,(function e(t){return v(o[0],n,e,i),r(t)}),i,!0)}return i}),l),y=g,h=v,d=m;e.bindEvent=g,e.bindEventOnce=m,e.getEventEmitter=function(e){return s.getEventEmitter(e)},e.off=h,e.on=y,e.once=d,e.removeEvent=v,e.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[n.length-1];if(l(i))if(e instanceof window.Event)i.dispatchEvent(e);else{var o=n.length>1?n.slice(0,n.length-1):null,u=s.parseEvent(e),a=u.eventName,c=u.namespace,f=new CustomEvent(a,{cancelable:!0,bubbles:!0,detail:o});c&&(f.namespace=c),i.dispatchEvent(f)}},Object.defineProperty(e,"__esModule",{value:!0})}));
