/*!
 * @pluginjs/events v0.7.16 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
import{isString as e,isFunction as t}from"@pluginjs/is";import{curryWith as n}from"@pluginjs/utils";import r from"@pluginjs/emitter";class a extends r{constructor(e){super(),this.element=e,this.element._eventEmitter=this}static getEventEmitter(e){return e._eventEmitter||(e._eventEmitter=new this(e)),e._eventEmitter}}var i=e=>"object"==typeof e&&"addEventListener"in e,s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n[n.length-1];if(i(s))if(e instanceof window.Event)s.dispatchEvent(e);else{var o=n.length>1?n.slice(0,n.length-1):null,{eventName:l,namespace:v}=a.parseEvent(e),c=new CustomEvent(l,{cancelable:!0,bubbles:!0,detail:o});v&&(c.namespace=v),s.dispatchEvent(c)}},o=e=>{var t=void 0===e.namespace?e.type:"".concat(e.type,".").concat(e.namespace),n=a.getEventEmitter(e.currentTarget);e.detail?n.emit(t,e,e.detail):n.emit(t,e)},l=(t,n,r,i,s)=>{var l=a.getEventEmitter(i),{eventName:v}=a.parseEvent(t);l.hasListeners(t)||i.addEventListener(v,o,!1);var c=((t,n,r,a)=>(t,i)=>{var s,o=t.target,l=t.currentTarget||a,v=i?[t].concat(i):[t];if(e(n))for(;o&&o!==l;)o.matches(n)&&(s=r.apply(o,v)),o=o.parentNode;else s=r.apply(l,v);!1===s&&(t.preventDefault(),t.stopPropagation())})(0,n,r,i);r._delegator=c,s?l.once(t,c):l.on(t,c)},v=n((n,r,i,s)=>{var l=n.split(" ");if(l.length>1)l.forEach(e=>{v(e,r,i,s)});else{e(r)||t(i)||(s=i,i=r,r=void 0),t(i)||(s=i,i=void 0);var c=n,p=a.getEventEmitter(s),{eventName:m}=a.parseEvent(c);p.hasListeners(c)&&(0===p.getListeners(c).length&&s.removeEventListener(m,o),void 0===i?p.off(c):p.off(c,i._delegator))}return s},i),c=n((n,r,a,i)=>{var s=n.split(" "),o=e(r)?r.split(","):null;switch(!0){case Boolean(s.length>1):s.forEach(e=>{c(e,r,a,i)});break;case Boolean(o&&o.length>1):o.forEach(e=>{c(n,e.trim(),a,i)});break;default:e(r)||t(a)||(i=a,a=r,r=void 0),l(n,r,a,i)}return i},i),p=n((n,r,a,i)=>{var s=n.split(" "),o=e(r)?r.split(","):null;switch(!0){case Boolean(s.length>1):s.forEach(e=>{p(e,r,a,i)});break;case Boolean(o&&o.length>1):o.forEach(e=>{p(n,e.trim(),a,i)});break;default:e(r)||t(a)||(i=a,a=r,r=void 0);var c=e=>(v(s[0],r,c,i),a(e));l(s[0],r,c,i,!0)}return i},i),m=c,E=v,h=p,g=e=>a.getEventEmitter(e);export{c as bindEvent,p as bindEventOnce,g as getEventEmitter,E as off,m as on,h as once,v as removeEvent,s as trigger};
