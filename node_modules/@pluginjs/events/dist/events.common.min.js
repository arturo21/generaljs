/*!
 * @pluginjs/events v0.7.16 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var is=require("@pluginjs/is"),utils=require("@pluginjs/utils"),Emitter=_interopDefault(require("@pluginjs/emitter"));class EventEmitter extends Emitter{constructor(e){super(),this.element=e,this.element._eventEmitter=this}static getEventEmitter(e){return e._eventEmitter||(e._eventEmitter=new this(e)),e._eventEmitter}}var supportEventListener=e=>"object"==typeof e&&"addEventListener"in e,trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n[n.length-1];if(supportEventListener(r))if(e instanceof window.Event)r.dispatchEvent(e);else{var s=n.length>1?n.slice(0,n.length-1):null,{eventName:a,namespace:o}=EventEmitter.parseEvent(e),v=new CustomEvent(a,{cancelable:!0,bubbles:!0,detail:s});o&&(v.namespace=o),r.dispatchEvent(v)}},getDelegator=(e,t,n,i)=>(e,r)=>{var s,a=e.target,o=e.currentTarget||i,v=r?[e].concat(r):[e];if(is.isString(t))for(;a&&a!==o;)a.matches(t)&&(s=n.apply(a,v)),a=a.parentNode;else s=n.apply(o,v);!1===s&&(e.preventDefault(),e.stopPropagation())},dispatch=e=>{var t=void 0===e.namespace?e.type:"".concat(e.type,".").concat(e.namespace),n=EventEmitter.getEventEmitter(e.currentTarget);e.detail?n.emit(t,e,e.detail):n.emit(t,e)},bind=(e,t,n,i,r)=>{var s=EventEmitter.getEventEmitter(i),{eventName:a}=EventEmitter.parseEvent(e);s.hasListeners(e)||i.addEventListener(a,dispatch,!1);var o=getDelegator(e,t,n,i);n._delegator=o,r?s.once(e,o):s.on(e,o)},removeEvent=utils.curryWith((e,t,n,i)=>{var r=e.split(" ");if(r.length>1)r.forEach(e=>{removeEvent(e,t,n,i)});else{is.isString(t)||is.isFunction(n)||(i=n,n=t,t=void 0),is.isFunction(n)||(i=n,n=void 0);var s=e,a=EventEmitter.getEventEmitter(i),{eventName:o}=EventEmitter.parseEvent(s);a.hasListeners(s)&&(0===a.getListeners(s).length&&i.removeEventListener(o,dispatch),void 0===n?a.off(s):a.off(s,n._delegator))}return i},supportEventListener),bindEvent=utils.curryWith((e,t,n,i)=>{var r=e.split(" "),s=is.isString(t)?t.split(","):null;switch(!0){case Boolean(r.length>1):r.forEach(e=>{bindEvent(e,t,n,i)});break;case Boolean(s&&s.length>1):s.forEach(t=>{bindEvent(e,t.trim(),n,i)});break;default:is.isString(t)||is.isFunction(n)||(i=n,n=t,t=void 0),bind(e,t,n,i)}return i},supportEventListener),bindEventOnce=utils.curryWith((e,t,n,i)=>{var r=e.split(" "),s=is.isString(t)?t.split(","):null;switch(!0){case Boolean(r.length>1):r.forEach(e=>{bindEventOnce(e,t,n,i)});break;case Boolean(s&&s.length>1):s.forEach(t=>{bindEventOnce(e,t.trim(),n,i)});break;default:is.isString(t)||is.isFunction(n)||(i=n,n=t,t=void 0);var a=e=>(removeEvent(r[0],t,a,i),n(e));bind(r[0],t,a,i,!0)}return i},supportEventListener),on=bindEvent,off=removeEvent,once=bindEventOnce,getEventEmitter=e=>EventEmitter.getEventEmitter(e);exports.bindEvent=bindEvent,exports.bindEventOnce=bindEventOnce,exports.getEventEmitter=getEventEmitter,exports.off=off,exports.on=on,exports.once=once,exports.removeEvent=removeEvent,exports.trigger=trigger;
