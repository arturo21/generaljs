/*!
 * @pluginjs/decorator v0.7.18 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
import{isFunction as t,isString as e,isArray as n,isUndefined as o,isObject as s}from"@pluginjs/is";import r from"@pluginjs/global-component";import i from"@pluginjs/factory";import{deepMerge as a,getUID as c,camelize as l,parseDataOptions as p}from"@pluginjs/utils";import{setData as u,removeData as f,getData as h}from"@pluginjs/dom";import{trigger as v}from"@pluginjs/events";import g from"@pluginjs/i18n";function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t,e){if(null==t)return{};var n,o,s=function(t,e){if(null==t)return{};var n,o,s={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(s[n]=t[n]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function O(o){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(l){var{methods:p=[],dependencies:v={}}=s,g=y(s,["methods","dependencies"]);i.register(o,Object.assign(l,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({methods:l.methods?a(l.methods,p):p,dependencies:l.dependencies?a(l.dependencies,v):v},g)));var O=[];if(l.prototype.plugin=o,l.getInstances=()=>O,l.addInstance=t=>{l.prototype instanceof r||u(o,t,t.element),t.instanceId=c(t.plugin),O.push(t)},l.removeInstance=t=>{l.prototype instanceof r||f(o,t.element),O=O.filter(e=>e!==t)},l.findInstanceByElement=t=>O.find(e=>e.element===t),l.prototype.resize&&void 0===l.resize&&(l.resize=function(t,e){for(var n=0;n<O.length;n++)O[n].resize(t,e)}),t(l.resize)&&i.emitter.on("resize",(t,e,n)=>{l.resize(e,n)}),l.prototype instanceof r)i[o]=l;else{var b=t=>"string"==typeof t?Array.from(document.querySelectorAll(t)):t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):t instanceof Node?Array.of(t):n(t)?t:[];i[o]=function(t,n){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];var a=b(t);if(!a.length)throw new Error("Element is not exists.");var c=[];if(e(n)){if(!l.methods.includes(n))throw new Error('Method "'.concat(n,'" is not exists on "').concat(o,'".'));c=a.map(t=>{var e=h(o,t);return e instanceof l?e[n](...r):null})}else c=a.map(t=>l.of(t,n));return 1===c.length?c[0]:c},Object.setPrototypeOf(i[o],l)}return l}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(s){s.events=e,s.setEvents=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.events=a(s.events,t)},s.prototype.eventName=function(t){if(o(t))return".".concat(this.plugin);n(t)||(t=t.split(" "));for(var e=t.length,s=0;s<e;s++)t[s]="".concat(t[s],".").concat(this.plugin);return t.join(" ")},s.prototype.eventNameWithId=function(t,e){if(e=e||this.instanceId,o(t))return".".concat(this.plugin,"-").concat(e);n(t)||(t=t.split(" "));for(var s=t.length,r=0;r<s;r++)t[r]="".concat(t[r],".").concat(this.plugin,"-").concat(e);return t.join(" ")},s.prototype.trigger=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];e instanceof Event?(v(e,this.element),e=e.type):v(this.selfEventName(e),this,...s,this.element),e=l(e);var i="on".concat(e);o(this.options)||o(this.options[i])||!t(this.options[i])||this.options[i].apply(this,s)},s.prototype.selfEventName=function(t){n(t)||(t=t.split(" "));for(var e=t.length,o=0;o<e;o++)t[o]="".concat(this.plugin,":").concat(t[o]);return t.join(" ")}}}function j(){return function(t){t.prototype.setupStates=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._states=t},t.prototype.is=function(t){return!!(this._states[t]&&this._states[t]>0)},t.prototype.enter=function(t){void 0===this._states[t]&&(this._states[t]=0),this._states[t]=1},t.prototype.leave=function(t){void 0===this._states[t]&&(this._states[t]=0),this._states[t]=0}}}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){n.classes=t,n.setClasses=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.classes=a(n.classes,t)},n.prototype.getClass=function(t,e,n){return void 0!==e?this.getClass(t.replace("{".concat(e,"}"),n)):t.replace("{namespace}",this.classes.NAMESPACE||"")},n.prototype.getClasses=function(t,n,o){if(e(o)&&void 0!==t&&void 0!==n){o=o.split(" ");for(var s=0;s<o.length;s++)o[s]=this.getClass(t,n,o[s]);return o.join(" ")}return""},n.prototype.setupClasses=function(t){var o={};if(void 0!==this.options&&s(this.options.classes)&&(o=this.options.classes),this.classes=a({},n.classes,t,function t(n){var o={};for(var r in n)Object.hasOwnProperty.call(n,r)&&(e(n[r])?o[r.toUpperCase()]=n[r]:s(n[r])&&(o[r.toUpperCase()]=t(n[r])));return o}(o)),void 0!==this.classes.NAMESPACE){var r=t=>{for(var n in t)Object.hasOwnProperty.call(t,n)&&(e(t[n])?t[n]=this.getClass(t[n]):s(t[n])&&(t[n]=r(t[n])));return t};this.classes=r(this.classes)}}}}function E(){return function(t){t.prototype.getThemeClass=function(t,n){if(void 0===t&&void 0!==this.options&&e(this.options.theme))return this.getThemeClass(this.options.theme);if(e(t)){if(void 0===n&&void 0!==this.classes&&(n=this.classes.THEME),t=t.split(" "),n)for(var o=0;o<t.length;o++)t[o]=n.replace("{theme}",t[o]);else for(var s=0;s<t.length;s++)t[s]=this.getClass(t[s]);return t.join(" ")}return""}}}function P(t){return function(e){e.I18N=new g({locale:e.defaults.locale,fallbacks:e.defaults.localeFallbacks},t),Object.assign(e.prototype,{setupI18n(){this.i18n=e.I18N.instance({locale:this.options.locale,fallbacks:this.options.localeFallbacks})},translate(t,e){return this.i18n.translate(t,e)},setLocale(t){return this.i18n.setLocale(t)},getLocale(){return this.i18n.getLocale()}})}}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n.defaults=t,n.setDefaults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.defaults=a(n.defaults,t)},e?(n.prototype.setupOptions=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];this.options=a(n.defaults,...e,this.getDataOptions())},n.prototype.getDataOptions=function(){return this.element?p(this.element.dataset):{}}):n.prototype.setupOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=a(n.defaults,t)}}}function A(t){return function(e){i[t]=e}}export{b as eventable,A as globalRegister,C as optionable,O as register,j as stateable,w as styleable,E as themeable,P as translateable};
