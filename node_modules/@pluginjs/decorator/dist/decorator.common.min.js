/*!
 * @pluginjs/decorator v0.7.18 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var is=require("@pluginjs/is"),GlobalComponent=_interopDefault(require("@pluginjs/global-component")),Pj=_interopDefault(require("@pluginjs/factory")),utils=require("@pluginjs/utils"),dom=require("@pluginjs/dom"),events=require("@pluginjs/events"),I18N=_interopDefault(require("@pluginjs/i18n"));function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var n,s,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function register(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var{methods:s=[],dependencies:i={}}=t,r=_objectWithoutProperties(t,["methods","dependencies"]);Pj.register(e,Object.assign(n,_objectSpread2({methods:n.methods?utils.deepMerge(n.methods,s):s,dependencies:n.dependencies?utils.deepMerge(n.dependencies,i):i},r)));var o=[];if(n.prototype.plugin=e,n.getInstances=()=>o,n.addInstance=t=>{n.prototype instanceof GlobalComponent||dom.setData(e,t,t.element),t.instanceId=utils.getUID(t.plugin),o.push(t)},n.removeInstance=t=>{n.prototype instanceof GlobalComponent||dom.removeData(e,t.element),o=o.filter(e=>e!==t)},n.findInstanceByElement=e=>o.find(t=>t.element===e),n.prototype.resize&&void 0===n.resize&&(n.resize=function(e,t){for(var n=0;n<o.length;n++)o[n].resize(e,t)}),is.isFunction(n.resize)&&Pj.emitter.on("resize",(e,t,s)=>{n.resize(t,s)}),n.prototype instanceof GlobalComponent)Pj[e]=n;else{var a=e=>"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):e instanceof Node?Array.of(e):is.isArray(e)?e:[];Pj[e]=function(t,s){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];var l=a(t);if(!l.length)throw new Error("Element is not exists.");var c=[];if(is.isString(s)){if(!n.methods.includes(s))throw new Error('Method "'.concat(s,'" is not exists on "').concat(e,'".'));c=l.map(t=>{var i=dom.getData(e,t);return i instanceof n?i[s](...r):null})}else c=l.map(e=>n.of(e,s));return 1===c.length?c[0]:c},Object.setPrototypeOf(Pj[e],n)}return n}}function eventable(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.events=e,t.setEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.events=utils.deepMerge(t.events,e)},t.prototype.eventName=function(e){if(is.isUndefined(e))return".".concat(this.plugin);is.isArray(e)||(e=e.split(" "));for(var t=e.length,n=0;n<t;n++)e[n]="".concat(e[n],".").concat(this.plugin);return e.join(" ")},t.prototype.eventNameWithId=function(e,t){if(t=t||this.instanceId,is.isUndefined(e))return".".concat(this.plugin,"-").concat(t);is.isArray(e)||(e=e.split(" "));for(var n=e.length,s=0;s<n;s++)e[s]="".concat(e[s],".").concat(this.plugin,"-").concat(t);return e.join(" ")},t.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];e instanceof Event?(events.trigger(e,this.element),e=e.type):events.trigger(this.selfEventName(e),this,...n,this.element),e=utils.camelize(e);var i="on".concat(e);is.isUndefined(this.options)||is.isUndefined(this.options[i])||!is.isFunction(this.options[i])||this.options[i].apply(this,n)},t.prototype.selfEventName=function(e){is.isArray(e)||(e=e.split(" "));for(var t=e.length,n=0;n<t;n++)e[n]="".concat(this.plugin,":").concat(e[n]);return e.join(" ")}}}function stateable(){return function(e){e.prototype.setupStates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._states=e},e.prototype.is=function(e){return!!(this._states[e]&&this._states[e]>0)},e.prototype.enter=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=1},e.prototype.leave=function(e){void 0===this._states[e]&&(this._states[e]=0),this._states[e]=0}}}function styleable(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.classes=e,t.setClasses=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.classes=utils.deepMerge(t.classes,e)},t.prototype.getClass=function(e,t,n){return void 0!==t?this.getClass(e.replace("{".concat(t,"}"),n)):e.replace("{namespace}",this.classes.NAMESPACE||"")},t.prototype.getClasses=function(e,t,n){if(is.isString(n)&&void 0!==e&&void 0!==t){n=n.split(" ");for(var s=0;s<n.length;s++)n[s]=this.getClass(e,t,n[s]);return n.join(" ")}return""},t.prototype.setupClasses=function(e){var n={};if(void 0!==this.options&&is.isObject(this.options.classes)&&(n=this.options.classes),this.classes=utils.deepMerge({},t.classes,e,function e(t){var n={};for(var s in t)Object.hasOwnProperty.call(t,s)&&(is.isString(t[s])?n[s.toUpperCase()]=t[s]:is.isObject(t[s])&&(n[s.toUpperCase()]=e(t[s])));return n}(n)),void 0!==this.classes.NAMESPACE){var s=e=>{for(var t in e)Object.hasOwnProperty.call(e,t)&&(is.isString(e[t])?e[t]=this.getClass(e[t]):is.isObject(e[t])&&(e[t]=s(e[t])));return e};this.classes=s(this.classes)}}}}function themeable(){return function(e){e.prototype.getThemeClass=function(e,t){if(void 0===e&&void 0!==this.options&&is.isString(this.options.theme))return this.getThemeClass(this.options.theme);if(is.isString(e)){if(void 0===t&&void 0!==this.classes&&(t=this.classes.THEME),e=e.split(" "),t)for(var n=0;n<e.length;n++)e[n]=t.replace("{theme}",e[n]);else for(var s=0;s<e.length;s++)e[s]=this.getClass(e[s]);return e.join(" ")}return""}}}function translateable(e){return function(t){t.I18N=new I18N({locale:t.defaults.locale,fallbacks:t.defaults.localeFallbacks},e),Object.assign(t.prototype,{setupI18n(){this.i18n=t.I18N.instance({locale:this.options.locale,fallbacks:this.options.localeFallbacks})},translate(e,t){return this.i18n.translate(e,t)},setLocale(e){return this.i18n.setLocale(e)},getLocale(){return this.i18n.getLocale()}})}}function optionable(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n.defaults=e,n.setDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.defaults=utils.deepMerge(n.defaults,e)},t?(n.prototype.setupOptions=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.options=utils.deepMerge(n.defaults,...t,this.getDataOptions())},n.prototype.getDataOptions=function(){return this.element?utils.parseDataOptions(this.element.dataset):{}}):n.prototype.setupOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=utils.deepMerge(n.defaults,e)}}}function globalRegister(e){return function(t){Pj[e]=t}}exports.eventable=eventable,exports.globalRegister=globalRegister,exports.optionable=optionable,exports.register=register,exports.stateable=stateable,exports.styleable=styleable,exports.themeable=themeable,exports.translateable=translateable;
