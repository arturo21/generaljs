/*!
 * @pluginjs/i18n v0.7.16 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var utils=require("@pluginjs/utils"),template=_interopDefault(require("@pluginjs/template"));class I18N{constructor(t,a){this.defaults=utils.deepMerge(I18N.defaults,t),this.translations=a||{}}hasTranslation(t){return t in this.translations}addTranslation(t,a){this.translations[t]?Object.assign(this.translations[t],a):this.translations[t]=a}getTranslation(t){return this.translations[t]?this.translations[t]:{}}instance(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,e=utils.deepMerge(a.defaults,t),l=e.locale;function n(t,e){var l=a.getTranslation(e);return utils.getValueByPath(l,t)}return{translate(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,i=n(t,r);if(void 0===i&&e.fallbacks){var o=r.split("-");if(o.length>1&&a.hasTranslation(o[0])&&(i=n(t,o[0])),void 0===i)i=n(t,!0!==e.fallbacks&&a.hasTranslation(e.fallbacks)?e.fallbacks:a.defaults.locale)}if("[object Array]"===Object.prototype.toString.call(i)&&i.length>=2&&"string"==typeof s._number&&void 0!==s[s._number]){var u=parseInt(s[s._number],10);1===u?i=i[0]:u>1?i=i[1]:0===u&&i.length>=3&&(i=i[2])}if("string"==typeof i){var c,f=template.parse(i);if(!f)return i;for(var h=0;h<f.length;h++)void 0===s[c=f[h]]?s[c]=e.missingPlaceholder(c):null===s[c]&&(s[c]=e.nullPlaceholder(c));return template.render(i,s)}return Object(i)===i?i:'[missing "'.concat(r,".").concat(t,'" translation]')},setLocale(t){l=t},getLocale:()=>l}}setTranslations(t){this.translations=t}}I18N.defaults={locale:"en",fallbacks:!0,nullPlaceholder:t=>"[missing {{".concat(t,"}} value]"),missingPlaceholder:t=>"[missing {{".concat(t,"}} value]")},module.exports=I18N;
