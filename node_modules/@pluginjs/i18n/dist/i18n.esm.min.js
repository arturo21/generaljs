/*!
 * @pluginjs/i18n v0.7.16 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
import{deepMerge as t,getValueByPath as a}from"@pluginjs/utils";import n from"@pluginjs/template";class s{constructor(a,n){this.defaults=t(s.defaults,a),this.translations=n||{}}hasTranslation(t){return t in this.translations}addTranslation(t,a){this.translations[t]?Object.assign(this.translations[t],a):this.translations[t]=a}getTranslation(t){return this.translations[t]?this.translations[t]:{}}instance(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this,r=t(l.defaults,s),i=r.locale;function e(t,n){var s=l.getTranslation(n);return a(s,t)}return{translate(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,o=e(t,s);if(void 0===o&&r.fallbacks){var c=s.split("-");if(c.length>1&&l.hasTranslation(c[0])&&(o=e(t,c[0])),void 0===o)o=e(t,!0!==r.fallbacks&&l.hasTranslation(r.fallbacks)?r.fallbacks:l.defaults.locale)}if("[object Array]"===Object.prototype.toString.call(o)&&o.length>=2&&"string"==typeof a._number&&void 0!==a[a._number]){var u=parseInt(a[a._number],10);1===u?o=o[0]:u>1?o=o[1]:0===u&&o.length>=3&&(o=o[2])}if("string"==typeof o){var h,f=n.parse(o);if(!f)return o;for(var g=0;g<f.length;g++)void 0===a[h=f[g]]?a[h]=r.missingPlaceholder(h):null===a[h]&&(a[h]=r.nullPlaceholder(h));return n.render(o,a)}return Object(o)===o?o:'[missing "'.concat(s,".").concat(t,'" translation]')},setLocale(t){i=t},getLocale:()=>i}}setTranslations(t){this.translations=t}}s.defaults={locale:"en",fallbacks:!0,nullPlaceholder:t=>"[missing {{".concat(t,"}} value]"),missingPlaceholder:t=>"[missing {{".concat(t,"}} value]")};export default s;
