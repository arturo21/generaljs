/*!
 * @pluginjs/emitter v0.7.15 (https://pluginjs.com)
 * Copyright 2019 Creation Studio Limited
 * Released under the GPL-3.0 License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@pluginjs/simple-emitter")):"function"==typeof define&&define.amd?define(["@pluginjs/simple-emitter"],t):(e=e||self)["@pluginjs/emitter"]=t(e["@pluginjs/simple-emitter"])}(this,(function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}return function(e){function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r(this,n(i).call(this))).namespaces={},e}var a,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e),a=i,l=[{key:"parseEvent",value:function(e){if("string"!=typeof e&&(e=e.toString()),-1===e.indexOf("."))return{eventName:e.trim().length>1?e:null,namespace:null};var t=e.split(".");return{eventName:0===t[0].trim().length?null:t[0],namespace:0===t[1].trim().length?null:t[1]}}}],(o=[{key:"addListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.ensureListener(t);var r=this.constructor.parseEvent(e),i=r.eventName,a=r.namespace;if(!i)throw new Error("Event should not be null.");return this.listeners[i]||(this.listeners[i]={}),a?(this.addToEventWithNamespace(i,a,n,t,s),this.addToNamespace(i,a)):this.addToEvent(i,n,t,s),this}},{key:"removeListener",value:function(e,t){if(this.hasListeners(e)){var n=this.constructor.parseEvent(e),s=n.eventName,r=n.namespace;switch(!0){case Boolean(!r&&s):this.filterListeners(s,"*",t);break;case Boolean(!s&&r):for(var i=this.namespaces[r],a=0;a<i.length;a++)this.filterListeners(i[a],r,t);for(var o=0;o<i.length;o++)Object.prototype.hasOwnProperty.call(this.listeners[i[o]],r)||this.removeEventInNamespaces(i[o],r);break;case Boolean(s&&r):var l=this.removeEventInNamespaces(s,r);this.filterListeners(s,r,t,l)}}return this}},{key:"removeAllListeners",value:function(e){var t=this;if(this.hasListeners(e)){var n=this.constructor.parseEvent(e),s=n.eventName,r=n.namespace;switch(!0){case Boolean(!r&&s):Object.keys(this.listeners[s]).forEach((function(e){Object.prototype.hasOwnProperty.call(t.namespaces,e)&&t.removeEventInNamespaces(s,e)})),delete this.listeners[s];break;case Boolean(!s&&r):for(var i=this.namespaces[r],a=0;a<i.length;a++)delete this.listeners[i[a]][r];delete this.namespaces[r];break;case Boolean(s&&r):this.removeEventInNamespaces(s,r),delete this.listeners[s][r]}}return this}},{key:"hasListeners",value:function(e){var t=this.constructor.parseEvent(e),n=t.eventName,s=t.namespace;return!s&&n?!(!this.listeners[n]||0===Object.keys(this.listeners[n]).length):!n&&s?!(!this.namespaces[s]||0===Object.keys(this.namespaces[s]).length):!!(n&&s&&this.listeners[n]&&this.listeners[n][s]&&0!==this.listeners[n][s].length)}},{key:"getListeners",value:function(e){var t=this;if(this.hasListeners(e)){var n=this.constructor.parseEvent(e),s=n.eventName,r=n.namespace,i=[];switch(!0){case Boolean(!r&&s):return Object.keys(this.listeners[s]).forEach((function(e){for(var n=0;n<t.listeners[s][e].length;n++)i=i.concat(t.listeners[s][e][n])})),i;case Boolean(!s&&r):for(var a=this.namespaces[r],o=0;o<a.length;o++)for(var l=0;l<this.listeners[a[o]][r].length;l++)i=i.concat(this.listeners[a[o]][r][l]);return i;case Boolean(s&&r):var c=this.listeners[s];if(Object.prototype.hasOwnProperty.call(c,r)){for(var h=0;h<c[r].length;h++)i=i.concat(c[r][h]);return i}return i}}return[]}},{key:"filterListeners",value:function(e,t,n,s){var r=this.listeners[e];void 0!==r[t]&&(r[t]=r[t].filter((function(e){return e.listener!==n})),0===r[t].length&&(s&&s(),delete r[t])),this.listeners[e]=r}},{key:"removeEventInNamespaces",value:function(e,t){for(var n=this.namespaces[t].length;n--;)this.namespaces[t][n]===e&&this.namespaces[t].splice(n,1)}},{key:"addToEvent",value:function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.listeners[e]["*"]||(this.listeners[e]["*"]=[]),this.listeners[e]["*"].push({context:t,listener:n,one:s})}},{key:"addToEventWithNamespace",value:function(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.listeners[e][t]||(this.listeners[e][t]=[]),this.listeners[e][t].push({context:n,listener:s,one:r})}},{key:"addToNamespace",value:function(e,t){this.namespaces[t]||(this.namespaces[t]=[]),this.checkNamespace(e,t)||this.namespaces[t].push(e)}},{key:"checkNamespace",value:function(e,t){for(var n=0;n<this.namespaces[t].length;n++)if(this.namespaces[t][n]===e)return!0;return!1}}])&&t(a.prototype,o),l&&t(a,l),i}(e=e&&e.hasOwnProperty("default")?e.default:e)}));
