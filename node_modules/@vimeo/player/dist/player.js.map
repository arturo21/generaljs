{"version":3,"file":"player.js","sources":["src/lib/functions.js","src/lib/compatibility-check.js","node_modules/weakmap-polyfill/weakmap-polyfill.js","node_modules/native-promise-only/lib/npo.src.js","src/lib/callbacks.js","src/lib/embed.js","src/lib/postmessage.js","src/player.js"],"sourcesContent":["/**\n * @module lib/functions\n */\n\n/**\n * Check to see this is a node environment.\n * @type {Boolean}\n */\n/* global global */\nexport const isNode = typeof global !== 'undefined' &&\n  ({}).toString.call(global) === '[object global]';\n\n/**\n * Get the name of the method for a given getter or setter.\n *\n * @param {string} prop The name of the property.\n * @param {string} type Either “get” or “set”.\n * @return {string}\n */\nexport function getMethodName(prop, type) {\n    if (prop.indexOf(type.toLowerCase()) === 0) {\n        return prop;\n    }\n\n    return `${type.toLowerCase()}${prop.substr(0, 1).toUpperCase()}${prop.substr(1)}`;\n}\n\n/**\n * Check to see if the object is a DOM Element.\n *\n * @param {*} element The object to check.\n * @return {boolean}\n */\nexport function isDomElement(element) {\n    return Boolean(\n        element && element.nodeType === 1 && 'nodeName' in element &&\n        element.ownerDocument && element.ownerDocument.defaultView\n    );\n}\n\n/**\n * Check to see whether the value is a number.\n *\n * @see http://dl.dropboxusercontent.com/u/35146/js/tests/isNumber.html\n * @param {*} value The value to check.\n * @param {boolean} integer Check if the value is an integer.\n * @return {boolean}\n */\nexport function isInteger(value) {\n    // eslint-disable-next-line eqeqeq\n    return !isNaN(parseFloat(value)) && isFinite(value) && Math.floor(value) == value;\n}\n\n/**\n * Check to see if the URL is a Vimeo url.\n *\n * @param {string} url The url string.\n * @return {boolean}\n */\nexport function isVimeoUrl(url) {\n    return (/^(https?:)?\\/\\/((player|www)\\.)?vimeo\\.com(?=$|\\/)/).test(url);\n}\n\n/**\n * Get the Vimeo URL from an element.\n * The element must have either a data-vimeo-id or data-vimeo-url attribute.\n *\n * @param {object} oEmbedParameters The oEmbed parameters.\n * @return {string}\n */\nexport function getVimeoUrl(oEmbedParameters = {}) {\n    const id = oEmbedParameters.id;\n    const url = oEmbedParameters.url;\n    const idOrUrl = id || url;\n\n    if (!idOrUrl) {\n        throw new Error('An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.');\n    }\n\n    if (isInteger(idOrUrl)) {\n        return `https://vimeo.com/${idOrUrl}`;\n    }\n\n    if (isVimeoUrl(idOrUrl)) {\n        return idOrUrl.replace('http:', 'https:');\n    }\n\n    if (id) {\n        throw new TypeError(`“${id}” is not a valid video id.`);\n    }\n\n    throw new TypeError(`“${idOrUrl}” is not a vimeo.com url.`);\n}\n","import { isNode } from './functions';\n\nconst arrayIndexOfSupport = typeof Array.prototype.indexOf !== 'undefined';\nconst postMessageSupport = typeof window !== 'undefined' && typeof window.postMessage !== 'undefined';\n\nif (!isNode && (!arrayIndexOfSupport || !postMessageSupport)) {\n    throw new Error('Sorry, the Vimeo Player API is not available in this browser.');\n}\n","/*!\n * weakmap-polyfill v2.0.0 - ECMAScript6 WeakMap polyfill\n * https://github.com/polygonplanet/weakmap-polyfill\n * Copyright (c) 2015-2016 polygon planet <polygon.planet.aqua@gmail.com>\n * @license MIT\n */\n\n(function(self) {\n  'use strict';\n\n  if (self.WeakMap) {\n    return;\n  }\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var defineProperty = function(object, name, value) {\n    if (Object.defineProperty) {\n      Object.defineProperty(object, name, {\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    } else {\n      object[name] = value;\n    }\n  };\n\n  self.WeakMap = (function() {\n\n    // ECMA-262 23.3 WeakMap Objects\n    function WeakMap() {\n      if (this === void 0) {\n        throw new TypeError(\"Constructor WeakMap requires 'new'\");\n      }\n\n      defineProperty(this, '_id', genId('_WeakMap'));\n\n      // ECMA-262 23.3.1.1 WeakMap([iterable])\n      if (arguments.length > 0) {\n        // Currently, WeakMap `iterable` argument is not supported\n        throw new TypeError('WeakMap iterable is not supported');\n      }\n    }\n\n    // ECMA-262 23.3.3.2 WeakMap.prototype.delete(key)\n    defineProperty(WeakMap.prototype, 'delete', function(key) {\n      checkInstance(this, 'delete');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        delete key[this._id];\n        return true;\n      }\n\n      return false;\n    });\n\n    // ECMA-262 23.3.3.3 WeakMap.prototype.get(key)\n    defineProperty(WeakMap.prototype, 'get', function(key) {\n      checkInstance(this, 'get');\n\n      if (!isObject(key)) {\n        return void 0;\n      }\n\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        return entry[1];\n      }\n\n      return void 0;\n    });\n\n    // ECMA-262 23.3.3.4 WeakMap.prototype.has(key)\n    defineProperty(WeakMap.prototype, 'has', function(key) {\n      checkInstance(this, 'has');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        return true;\n      }\n\n      return false;\n    });\n\n    // ECMA-262 23.3.3.5 WeakMap.prototype.set(key, value)\n    defineProperty(WeakMap.prototype, 'set', function(key, value) {\n      checkInstance(this, 'set');\n\n      if (!isObject(key)) {\n        throw new TypeError('Invalid value used as weak map key');\n      }\n\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        entry[1] = value;\n        return this;\n      }\n\n      defineProperty(key, this._id, [key, value]);\n      return this;\n    });\n\n\n    function checkInstance(x, methodName) {\n      if (!isObject(x) || !hasOwnProperty.call(x, '_id')) {\n        throw new TypeError(\n          methodName + ' method called on incompatible receiver ' +\n          typeof x\n        );\n      }\n    }\n\n    function genId(prefix) {\n      return prefix + '_' + rand() + '.' + rand();\n    }\n\n    function rand() {\n      return Math.random().toString().substring(2);\n    }\n\n\n    defineProperty(WeakMap, '_polyfill', true);\n    return WeakMap;\n  })();\n\n\n  function isObject(x) {\n    return Object(x) === x;\n  }\n\n})(\n  typeof self !== 'undefined' ? self :\n  typeof window !== 'undefined' ? window :\n  typeof global !== 'undefined' ? global : this\n);\n","/*! Native Promise Only\n    v0.8.1 (c) Kyle Simpson\n    MIT License: http://getify.mit-license.org\n*/\n\n(function UMD(name,context,definition){\n\t// special form of UMD for polyfilling across evironments\n\tcontext[name] = context[name] || definition();\n\tif (typeof module != \"undefined\" && module.exports) { module.exports = context[name]; }\n\telse if (typeof define == \"function\" && define.amd) { define(function $AMD$(){ return context[name]; }); }\n})(\"Promise\",typeof global != \"undefined\" ? global : this,function DEF(){\n\t/*jshint validthis:true */\n\t\"use strict\";\n\n\tvar builtInProp, cycle, scheduling_queue,\n\t\tToString = Object.prototype.toString,\n\t\ttimer = (typeof setImmediate != \"undefined\") ?\n\t\t\tfunction timer(fn) { return setImmediate(fn); } :\n\t\t\tsetTimeout\n\t;\n\n\t// dammit, IE8.\n\ttry {\n\t\tObject.defineProperty({},\"x\",{});\n\t\tbuiltInProp = function builtInProp(obj,name,val,config) {\n\t\t\treturn Object.defineProperty(obj,name,{\n\t\t\t\tvalue: val,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: config !== false\n\t\t\t});\n\t\t};\n\t}\n\tcatch (err) {\n\t\tbuiltInProp = function builtInProp(obj,name,val) {\n\t\t\tobj[name] = val;\n\t\t\treturn obj;\n\t\t};\n\t}\n\n\t// Note: using a queue instead of array for efficiency\n\tscheduling_queue = (function Queue() {\n\t\tvar first, last, item;\n\n\t\tfunction Item(fn,self) {\n\t\t\tthis.fn = fn;\n\t\t\tthis.self = self;\n\t\t\tthis.next = void 0;\n\t\t}\n\n\t\treturn {\n\t\t\tadd: function add(fn,self) {\n\t\t\t\titem = new Item(fn,self);\n\t\t\t\tif (last) {\n\t\t\t\t\tlast.next = item;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tfirst = item;\n\t\t\t\t}\n\t\t\t\tlast = item;\n\t\t\t\titem = void 0;\n\t\t\t},\n\t\t\tdrain: function drain() {\n\t\t\t\tvar f = first;\n\t\t\t\tfirst = last = cycle = void 0;\n\n\t\t\t\twhile (f) {\n\t\t\t\t\tf.fn.call(f.self);\n\t\t\t\t\tf = f.next;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tfunction schedule(fn,self) {\n\t\tscheduling_queue.add(fn,self);\n\t\tif (!cycle) {\n\t\t\tcycle = timer(scheduling_queue.drain);\n\t\t}\n\t}\n\n\t// promise duck typing\n\tfunction isThenable(o) {\n\t\tvar _then, o_type = typeof o;\n\n\t\tif (o != null &&\n\t\t\t(\n\t\t\t\to_type == \"object\" || o_type == \"function\"\n\t\t\t)\n\t\t) {\n\t\t\t_then = o.then;\n\t\t}\n\t\treturn typeof _then == \"function\" ? _then : false;\n\t}\n\n\tfunction notify() {\n\t\tfor (var i=0; i<this.chain.length; i++) {\n\t\t\tnotifyIsolated(\n\t\t\t\tthis,\n\t\t\t\t(this.state === 1) ? this.chain[i].success : this.chain[i].failure,\n\t\t\t\tthis.chain[i]\n\t\t\t);\n\t\t}\n\t\tthis.chain.length = 0;\n\t}\n\n\t// NOTE: This is a separate function to isolate\n\t// the `try..catch` so that other code can be\n\t// optimized better\n\tfunction notifyIsolated(self,cb,chain) {\n\t\tvar ret, _then;\n\t\ttry {\n\t\t\tif (cb === false) {\n\t\t\t\tchain.reject(self.msg);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (cb === true) {\n\t\t\t\t\tret = self.msg;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tret = cb.call(void 0,self.msg);\n\t\t\t\t}\n\n\t\t\t\tif (ret === chain.promise) {\n\t\t\t\t\tchain.reject(TypeError(\"Promise-chain cycle\"));\n\t\t\t\t}\n\t\t\t\telse if (_then = isThenable(ret)) {\n\t\t\t\t\t_then.call(ret,chain.resolve,chain.reject);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchain.resolve(ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (err) {\n\t\t\tchain.reject(err);\n\t\t}\n\t}\n\n\tfunction resolve(msg) {\n\t\tvar _then, self = this;\n\n\t\t// already triggered?\n\t\tif (self.triggered) { return; }\n\n\t\tself.triggered = true;\n\n\t\t// unwrap\n\t\tif (self.def) {\n\t\t\tself = self.def;\n\t\t}\n\n\t\ttry {\n\t\t\tif (_then = isThenable(msg)) {\n\t\t\t\tschedule(function(){\n\t\t\t\t\tvar def_wrapper = new MakeDefWrapper(self);\n\t\t\t\t\ttry {\n\t\t\t\t\t\t_then.call(msg,\n\t\t\t\t\t\t\tfunction $resolve$(){ resolve.apply(def_wrapper,arguments); },\n\t\t\t\t\t\t\tfunction $reject$(){ reject.apply(def_wrapper,arguments); }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\treject.call(def_wrapper,err);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tself.msg = msg;\n\t\t\t\tself.state = 1;\n\t\t\t\tif (self.chain.length > 0) {\n\t\t\t\t\tschedule(notify,self);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (err) {\n\t\t\treject.call(new MakeDefWrapper(self),err);\n\t\t}\n\t}\n\n\tfunction reject(msg) {\n\t\tvar self = this;\n\n\t\t// already triggered?\n\t\tif (self.triggered) { return; }\n\n\t\tself.triggered = true;\n\n\t\t// unwrap\n\t\tif (self.def) {\n\t\t\tself = self.def;\n\t\t}\n\n\t\tself.msg = msg;\n\t\tself.state = 2;\n\t\tif (self.chain.length > 0) {\n\t\t\tschedule(notify,self);\n\t\t}\n\t}\n\n\tfunction iteratePromises(Constructor,arr,resolver,rejecter) {\n\t\tfor (var idx=0; idx<arr.length; idx++) {\n\t\t\t(function IIFE(idx){\n\t\t\t\tConstructor.resolve(arr[idx])\n\t\t\t\t.then(\n\t\t\t\t\tfunction $resolver$(msg){\n\t\t\t\t\t\tresolver(idx,msg);\n\t\t\t\t\t},\n\t\t\t\t\trejecter\n\t\t\t\t);\n\t\t\t})(idx);\n\t\t}\n\t}\n\n\tfunction MakeDefWrapper(self) {\n\t\tthis.def = self;\n\t\tthis.triggered = false;\n\t}\n\n\tfunction MakeDef(self) {\n\t\tthis.promise = self;\n\t\tthis.state = 0;\n\t\tthis.triggered = false;\n\t\tthis.chain = [];\n\t\tthis.msg = void 0;\n\t}\n\n\tfunction Promise(executor) {\n\t\tif (typeof executor != \"function\") {\n\t\t\tthrow TypeError(\"Not a function\");\n\t\t}\n\n\t\tif (this.__NPO__ !== 0) {\n\t\t\tthrow TypeError(\"Not a promise\");\n\t\t}\n\n\t\t// instance shadowing the inherited \"brand\"\n\t\t// to signal an already \"initialized\" promise\n\t\tthis.__NPO__ = 1;\n\n\t\tvar def = new MakeDef(this);\n\n\t\tthis[\"then\"] = function then(success,failure) {\n\t\t\tvar o = {\n\t\t\t\tsuccess: typeof success == \"function\" ? success : true,\n\t\t\t\tfailure: typeof failure == \"function\" ? failure : false\n\t\t\t};\n\t\t\t// Note: `then(..)` itself can be borrowed to be used against\n\t\t\t// a different promise constructor for making the chained promise,\n\t\t\t// by substituting a different `this` binding.\n\t\t\to.promise = new this.constructor(function extractChain(resolve,reject) {\n\t\t\t\tif (typeof resolve != \"function\" || typeof reject != \"function\") {\n\t\t\t\t\tthrow TypeError(\"Not a function\");\n\t\t\t\t}\n\n\t\t\t\to.resolve = resolve;\n\t\t\t\to.reject = reject;\n\t\t\t});\n\t\t\tdef.chain.push(o);\n\n\t\t\tif (def.state !== 0) {\n\t\t\t\tschedule(notify,def);\n\t\t\t}\n\n\t\t\treturn o.promise;\n\t\t};\n\t\tthis[\"catch\"] = function $catch$(failure) {\n\t\t\treturn this.then(void 0,failure);\n\t\t};\n\n\t\ttry {\n\t\t\texecutor.call(\n\t\t\t\tvoid 0,\n\t\t\t\tfunction publicResolve(msg){\n\t\t\t\t\tresolve.call(def,msg);\n\t\t\t\t},\n\t\t\t\tfunction publicReject(msg) {\n\t\t\t\t\treject.call(def,msg);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\tcatch (err) {\n\t\t\treject.call(def,err);\n\t\t}\n\t}\n\n\tvar PromisePrototype = builtInProp({},\"constructor\",Promise,\n\t\t/*configurable=*/false\n\t);\n\n\t// Note: Android 4 cannot use `Object.defineProperty(..)` here\n\tPromise.prototype = PromisePrototype;\n\n\t// built-in \"brand\" to signal an \"uninitialized\" promise\n\tbuiltInProp(PromisePrototype,\"__NPO__\",0,\n\t\t/*configurable=*/false\n\t);\n\n\tbuiltInProp(Promise,\"resolve\",function Promise$resolve(msg) {\n\t\tvar Constructor = this;\n\n\t\t// spec mandated checks\n\t\t// note: best \"isPromise\" check that's practical for now\n\t\tif (msg && typeof msg == \"object\" && msg.__NPO__ === 1) {\n\t\t\treturn msg;\n\t\t}\n\n\t\treturn new Constructor(function executor(resolve,reject){\n\t\t\tif (typeof resolve != \"function\" || typeof reject != \"function\") {\n\t\t\t\tthrow TypeError(\"Not a function\");\n\t\t\t}\n\n\t\t\tresolve(msg);\n\t\t});\n\t});\n\n\tbuiltInProp(Promise,\"reject\",function Promise$reject(msg) {\n\t\treturn new this(function executor(resolve,reject){\n\t\t\tif (typeof resolve != \"function\" || typeof reject != \"function\") {\n\t\t\t\tthrow TypeError(\"Not a function\");\n\t\t\t}\n\n\t\t\treject(msg);\n\t\t});\n\t});\n\n\tbuiltInProp(Promise,\"all\",function Promise$all(arr) {\n\t\tvar Constructor = this;\n\n\t\t// spec mandated checks\n\t\tif (ToString.call(arr) != \"[object Array]\") {\n\t\t\treturn Constructor.reject(TypeError(\"Not an array\"));\n\t\t}\n\t\tif (arr.length === 0) {\n\t\t\treturn Constructor.resolve([]);\n\t\t}\n\n\t\treturn new Constructor(function executor(resolve,reject){\n\t\t\tif (typeof resolve != \"function\" || typeof reject != \"function\") {\n\t\t\t\tthrow TypeError(\"Not a function\");\n\t\t\t}\n\n\t\t\tvar len = arr.length, msgs = Array(len), count = 0;\n\n\t\t\titeratePromises(Constructor,arr,function resolver(idx,msg) {\n\t\t\t\tmsgs[idx] = msg;\n\t\t\t\tif (++count === len) {\n\t\t\t\t\tresolve(msgs);\n\t\t\t\t}\n\t\t\t},reject);\n\t\t});\n\t});\n\n\tbuiltInProp(Promise,\"race\",function Promise$race(arr) {\n\t\tvar Constructor = this;\n\n\t\t// spec mandated checks\n\t\tif (ToString.call(arr) != \"[object Array]\") {\n\t\t\treturn Constructor.reject(TypeError(\"Not an array\"));\n\t\t}\n\n\t\treturn new Constructor(function executor(resolve,reject){\n\t\t\tif (typeof resolve != \"function\" || typeof reject != \"function\") {\n\t\t\t\tthrow TypeError(\"Not a function\");\n\t\t\t}\n\n\t\t\titeratePromises(Constructor,arr,function resolver(idx,msg){\n\t\t\t\tresolve(msg);\n\t\t\t},reject);\n\t\t});\n\t});\n\n\treturn Promise;\n});\n","/**\n * @module lib/callbacks\n */\n\nexport const callbackMap = new WeakMap();\n\n/**\n * Store a callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @param {(function(this:Player, *): void|{resolve: function, reject: function})} callback\n *        The callback to call or an object with resolve and reject functions for a promise.\n * @return {void}\n */\nexport function storeCallback(player, name, callback) {\n    const playerCallbacks = callbackMap.get(player.element) || {};\n\n    if (!(name in playerCallbacks)) {\n        playerCallbacks[name] = [];\n    }\n\n    playerCallbacks[name].push(callback);\n    callbackMap.set(player.element, playerCallbacks);\n}\n\n/**\n * Get the callbacks for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @return {function[]}\n */\nexport function getCallbacks(player, name) {\n    const playerCallbacks = callbackMap.get(player.element) || {};\n    return playerCallbacks[name] || [];\n}\n\n/**\n * Remove a stored callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @param {function} [callback] The specific callback to remove.\n * @return {boolean} Was this the last callback?\n */\nexport function removeCallback(player, name, callback) {\n    const playerCallbacks = callbackMap.get(player.element) || {};\n\n    if (!playerCallbacks[name]) {\n        return true;\n    }\n\n    // If no callback is passed, remove all callbacks for the event\n    if (!callback) {\n        playerCallbacks[name] = [];\n        callbackMap.set(player.element, playerCallbacks);\n\n        return true;\n    }\n\n    const index = playerCallbacks[name].indexOf(callback);\n\n    if (index !== -1) {\n        playerCallbacks[name].splice(index, 1);\n    }\n\n    callbackMap.set(player.element, playerCallbacks);\n    return playerCallbacks[name] && playerCallbacks[name].length === 0;\n}\n\n/**\n * Return the first stored callback for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @return {function} The callback, or false if there were none\n */\nexport function shiftCallbacks(player, name) {\n    const playerCallbacks = getCallbacks(player, name);\n\n    if (playerCallbacks.length < 1) {\n        return false;\n    }\n\n    const callback = playerCallbacks.shift();\n    removeCallback(player, name, callback);\n    return callback;\n}\n\n/**\n * Move callbacks associated with an element to another element.\n *\n * @param {HTMLElement} oldElement The old element.\n * @param {HTMLElement} newElement The new element.\n * @return {void}\n */\nexport function swapCallbacks(oldElement, newElement) {\n    const playerCallbacks = callbackMap.get(oldElement);\n\n    callbackMap.set(newElement, playerCallbacks);\n    callbackMap.delete(oldElement);\n}\n","/**\n * @module lib/embed\n */\n\nimport { isVimeoUrl, getVimeoUrl } from './functions';\n\nconst oEmbedParameters = [\n    'autopause',\n    'autoplay',\n    'background',\n    'byline',\n    'color',\n    'controls',\n    'dnt',\n    'height',\n    'id',\n    'loop',\n    'maxheight',\n    'maxwidth',\n    'muted',\n    'playsinline',\n    'portrait',\n    'responsive',\n    'speed',\n    'texttrack',\n    'title',\n    'transparent',\n    'url',\n    'width'\n];\n\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\nexport function getOEmbedParameters(element, defaults = {}) {\n    return oEmbedParameters.reduce((params, param) => {\n        const value = element.getAttribute(`data-vimeo-${param}`);\n\n        if (value || value === '') {\n            params[param] = value === '' ? 1 : value;\n        }\n\n        return params;\n    }, defaults);\n}\n\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\nexport function createEmbed({ html }, element) {\n    if (!element) {\n        throw new TypeError('An element must be provided');\n    }\n\n    if (element.getAttribute('data-vimeo-initialized') !== null) {\n        return element.querySelector('iframe');\n    }\n\n    const div = document.createElement('div');\n    div.innerHTML = html;\n\n    element.appendChild(div.firstChild);\n    element.setAttribute('data-vimeo-initialized', 'true');\n\n    return element.querySelector('iframe');\n}\n\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\nexport function getOEmbedData(videoUrl, params = {}, element) {\n    return new Promise((resolve, reject) => {\n        if (!isVimeoUrl(videoUrl)) {\n            throw new TypeError(`“${videoUrl}” is not a vimeo.com url.`);\n        }\n\n        let url = `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(videoUrl)}`;\n\n        for (const param in params) {\n            if (params.hasOwnProperty(param)) {\n                url += `&${param}=${encodeURIComponent(params[param])}`;\n            }\n        }\n\n        const xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n        xhr.open('GET', url, true);\n\n        xhr.onload = function() {\n            if (xhr.status === 404) {\n                reject(new Error(`“${videoUrl}” was not found.`));\n                return;\n            }\n\n            if (xhr.status === 403) {\n                reject(new Error(`“${videoUrl}” is not embeddable.`));\n                return;\n            }\n\n            try {\n                const json = JSON.parse(xhr.responseText);\n                // Check api response for 403 on oembed\n                if (json.domain_status_code === 403) {\n                    // We still want to create the embed to give users visual feedback\n                    createEmbed(json, element);\n                    reject(new Error(`“${videoUrl}” is not embeddable.`));\n                    return;\n                }\n\n                resolve(json);\n            }\n            catch (error) {\n                reject(error);\n            }\n        };\n\n        xhr.onerror = function() {\n            const status = xhr.status ? ` (${xhr.status})` : '';\n            reject(new Error(`There was an error fetching the embed code from Vimeo${status}.`));\n        };\n\n        xhr.send();\n    });\n}\n\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nexport function initializeEmbeds(parent = document) {\n    const elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n\n    const handleError = (error) => {\n        if ('console' in window && console.error) {\n            console.error(`There was an error creating an embed: ${error}`);\n        }\n    };\n\n    elements.forEach((element) => {\n        try {\n            // Skip any that have data-vimeo-defer\n            if (element.getAttribute('data-vimeo-defer') !== null) {\n                return;\n            }\n\n            const params = getOEmbedParameters(element);\n            const url = getVimeoUrl(params);\n\n            getOEmbedData(url, params, element).then((data) => {\n                return createEmbed(data, element);\n            }).catch(handleError);\n        }\n        catch (error) {\n            handleError(error);\n        }\n    });\n}\n\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nexport function resizeEmbeds(parent = document) {\n    // Prevent execution if users include the player.js script multiple times.\n    if (window.VimeoPlayerResizeEmbeds_) {\n        return;\n    }\n    window.VimeoPlayerResizeEmbeds_ = true;\n\n    const onMessage = (event) => {\n        if (!isVimeoUrl(event.origin)) {\n            return;\n        }\n\n        // 'spacechange' is fired only on embeds with cards\n        if (!event.data || event.data.event !== 'spacechange') {\n            return;\n        }\n\n        const iframes = parent.querySelectorAll('iframe');\n\n        for (let i = 0; i < iframes.length; i++) {\n            if (iframes[i].contentWindow !== event.source) {\n                continue;\n            }\n\n            // Change padding-bottom of the enclosing div to accommodate\n            // card carousel without distorting aspect ratio\n            const space = iframes[i].parentElement;\n            space.style.paddingBottom = `${event.data.data[0].bottom}px`;\n\n            break;\n        }\n    };\n\n    if (window.addEventListener) {\n        window.addEventListener('message', onMessage, false);\n    }\n    else if (window.attachEvent) {\n        window.attachEvent('onmessage', onMessage);\n    }\n}\n","/**\n * @module lib/postmessage\n */\n\nimport { getCallbacks, removeCallback, shiftCallbacks } from './callbacks';\n\n/**\n * Parse a message received from postMessage.\n *\n * @param {*} data The data received from postMessage.\n * @return {object}\n */\nexport function parseMessageData(data) {\n    if (typeof data === 'string') {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            // If the message cannot be parsed, throw the error as a warning\n            console.warn(error);\n            return {};\n        }\n    }\n\n    return data;\n}\n\n/**\n * Post a message to the specified target.\n *\n * @param {Player} player The player object to use.\n * @param {string} method The API method to call.\n * @param {object} params The parameters to send to the player.\n * @return {void}\n */\nexport function postMessage(player, method, params) {\n    if (!player.element.contentWindow || !player.element.contentWindow.postMessage) {\n        return;\n    }\n\n    let message = {\n        method\n    };\n\n    if (params !== undefined) {\n        message.value = params;\n    }\n\n    // IE 8 and 9 do not support passing messages, so stringify them\n    const ieVersion = parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\\d+).*$/, '$1'));\n    if (ieVersion >= 8 && ieVersion < 10) {\n        message = JSON.stringify(message);\n    }\n\n    player.element.contentWindow.postMessage(message, player.origin);\n}\n\n/**\n * Parse the data received from a message event.\n *\n * @param {Player} player The player that received the message.\n * @param {(Object|string)} data The message data. Strings will be parsed into JSON.\n * @return {void}\n */\nexport function processData(player, data) {\n    data = parseMessageData(data);\n    let callbacks = [];\n    let param;\n\n    if (data.event) {\n        if (data.event === 'error') {\n            const promises = getCallbacks(player, data.data.method);\n\n            promises.forEach((promise) => {\n                const error = new Error(data.data.message);\n                error.name = data.data.name;\n\n                promise.reject(error);\n                removeCallback(player, data.data.method, promise);\n            });\n        }\n\n        callbacks = getCallbacks(player, `event:${data.event}`);\n        param = data.data;\n    }\n    else if (data.method) {\n        const callback = shiftCallbacks(player, data.method);\n\n        if (callback) {\n            callbacks.push(callback);\n            param = data.value;\n        }\n    }\n\n    callbacks.forEach((callback) => {\n        try {\n            if (typeof callback === 'function') {\n                callback.call(player, param);\n                return;\n            }\n\n            callback.resolve(param);\n        }\n        catch (e) {\n            // empty\n        }\n    });\n}\n","import './lib/compatibility-check';\n\nimport 'weakmap-polyfill';\nimport Promise from 'native-promise-only';\n\nimport { storeCallback, getCallbacks, removeCallback, swapCallbacks } from './lib/callbacks';\nimport { getMethodName, isDomElement, isVimeoUrl, getVimeoUrl, isNode } from './lib/functions';\nimport { getOEmbedParameters, getOEmbedData, createEmbed, initializeEmbeds, resizeEmbeds } from './lib/embed';\nimport { parseMessageData, postMessage, processData } from './lib/postmessage';\n\nconst playerMap = new WeakMap();\nconst readyMap = new WeakMap();\n\nclass Player {\n    /**\n     * Create a Player.\n     *\n     * @param {(HTMLIFrameElement|HTMLElement|string|jQuery)} element A reference to the Vimeo\n     *        player iframe, and id, or a jQuery object.\n     * @param {object} [options] oEmbed parameters to use when creating an embed in the element.\n     * @return {Player}\n     */\n    constructor(element, options = {}) {\n        /* global jQuery */\n        if (window.jQuery && element instanceof jQuery) {\n            if (element.length > 1 && window.console && console.warn) {\n                console.warn('A jQuery object with multiple elements was passed, using the first element.');\n            }\n\n            element = element[0];\n        }\n\n        // Find an element by ID\n        if (typeof document !== 'undefined' && typeof element === 'string') {\n            element = document.getElementById(element);\n        }\n\n        // Not an element!\n        if (!isDomElement(element)) {\n            throw new TypeError('You must pass either a valid element or a valid id.');\n        }\n\n        const win = element.ownerDocument.defaultView;\n\n        // Already initialized an embed in this div, so grab the iframe\n        if (element.nodeName !== 'IFRAME') {\n            const iframe = element.querySelector('iframe');\n\n            if (iframe) {\n                element = iframe;\n            }\n        }\n\n        // iframe url is not a Vimeo url\n        if (element.nodeName === 'IFRAME' && !isVimeoUrl(element.getAttribute('src') || '')) {\n            throw new Error('The player element passed isn’t a Vimeo embed.');\n        }\n\n        // If there is already a player object in the map, return that\n        if (playerMap.has(element)) {\n            return playerMap.get(element);\n        }\n\n        this.element = element;\n        this.origin = '*';\n\n        const readyPromise = new Promise((resolve, reject) => {\n            const onMessage = (event) => {\n                if (!isVimeoUrl(event.origin) || this.element.contentWindow !== event.source) {\n                    return;\n                }\n\n                if (this.origin === '*') {\n                    this.origin = event.origin;\n                }\n\n                const data = parseMessageData(event.data);\n                const isError = data && data.event === 'error';\n                const isReadyError = isError && data.data && data.data.method === 'ready';\n\n                if (isReadyError) {\n                    const error = new Error(data.data.message);\n                    error.name = data.data.name;\n                    reject(error);\n                    return;\n                }\n\n                const isReadyEvent = data && data.event === 'ready';\n                const isPingResponse = data && data.method === 'ping';\n\n                if (isReadyEvent || isPingResponse) {\n                    this.element.setAttribute('data-ready', 'true');\n                    resolve();\n                    return;\n                }\n\n                processData(this, data);\n            };\n\n            if (win.addEventListener) {\n                win.addEventListener('message', onMessage, false);\n            }\n            else if (win.attachEvent) {\n                win.attachEvent('onmessage', onMessage);\n            }\n\n            if (this.element.nodeName !== 'IFRAME') {\n                const params = getOEmbedParameters(element, options);\n                const url = getVimeoUrl(params);\n\n                getOEmbedData(url, params, element).then((data) => {\n                    const iframe = createEmbed(data, element);\n                    // Overwrite element with the new iframe,\n                    // but store reference to the original element\n                    this.element = iframe;\n                    this._originalElement = element;\n\n                    swapCallbacks(element, iframe);\n                    playerMap.set(this.element, this);\n\n                    return data;\n                }).catch(reject);\n            }\n        });\n\n        // Store a copy of this Player in the map\n        readyMap.set(this, readyPromise);\n        playerMap.set(this.element, this);\n\n        // Send a ping to the iframe so the ready promise will be resolved if\n        // the player is already ready.\n        if (this.element.nodeName === 'IFRAME') {\n            postMessage(this, 'ping');\n        }\n\n        return this;\n    }\n\n    /**\n     * Get a promise for a method.\n     *\n     * @param {string} name The API method to call.\n     * @param {Object} [args={}] Arguments to send via postMessage.\n     * @return {Promise}\n     */\n    callMethod(name, args = {}) {\n        return new Promise((resolve, reject) => {\n            // We are storing the resolve/reject handlers to call later, so we\n            // can’t return here.\n            // eslint-disable-next-line promise/always-return\n            return this.ready().then(() => {\n                storeCallback(this, name, {\n                    resolve,\n                    reject\n                });\n\n                postMessage(this, name, args);\n            }).catch(reject);\n        });\n    }\n\n    /**\n     * Get a promise for the value of a player property.\n     *\n     * @param {string} name The property name\n     * @return {Promise}\n     */\n    get(name) {\n        return new Promise((resolve, reject) => {\n            name = getMethodName(name, 'get');\n\n            // We are storing the resolve/reject handlers to call later, so we\n            // can’t return here.\n            // eslint-disable-next-line promise/always-return\n            return this.ready().then(() => {\n                storeCallback(this, name, {\n                    resolve,\n                    reject\n                });\n\n                postMessage(this, name);\n            }).catch(reject);\n        });\n    }\n\n    /**\n     * Get a promise for setting the value of a player property.\n     *\n     * @param {string} name The API method to call.\n     * @param {mixed} value The value to set.\n     * @return {Promise}\n     */\n    set(name, value) {\n        return new Promise((resolve, reject) => {\n            name = getMethodName(name, 'set');\n\n            if (value === undefined || value === null) {\n                throw new TypeError('There must be a value to set.');\n            }\n\n            // We are storing the resolve/reject handlers to call later, so we\n            // can’t return here.\n            // eslint-disable-next-line promise/always-return\n            return this.ready().then(() => {\n                storeCallback(this, name, {\n                    resolve,\n                    reject\n                });\n\n                postMessage(this, name, value);\n            }).catch(reject);\n        });\n    }\n\n    /**\n     * Add an event listener for the specified event. Will call the\n     * callback with a single parameter, `data`, that contains the data for\n     * that event.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function(*)} callback The function to call when the event fires.\n     * @return {void}\n     */\n    on(eventName, callback) {\n        if (!eventName) {\n            throw new TypeError('You must pass an event name.');\n        }\n\n        if (!callback) {\n            throw new TypeError('You must pass a callback function.');\n        }\n\n        if (typeof callback !== 'function') {\n            throw new TypeError('The callback must be a function.');\n        }\n\n        const callbacks = getCallbacks(this, `event:${eventName}`);\n        if (callbacks.length === 0) {\n            this.callMethod('addEventListener', eventName).catch(() => {\n                // Ignore the error. There will be an error event fired that\n                // will trigger the error callback if they are listening.\n            });\n        }\n\n        storeCallback(this, `event:${eventName}`, callback);\n    }\n\n    /**\n     * Remove an event listener for the specified event. Will remove all\n     * listeners for that event if a `callback` isn’t passed, or only that\n     * specific callback if it is passed.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function} [callback] The specific callback to remove.\n     * @return {void}\n     */\n    off(eventName, callback) {\n        if (!eventName) {\n            throw new TypeError('You must pass an event name.');\n        }\n\n        if (callback && typeof callback !== 'function') {\n            throw new TypeError('The callback must be a function.');\n        }\n\n        const lastCallback = removeCallback(this, `event:${eventName}`, callback);\n\n        // If there are no callbacks left, remove the listener\n        if (lastCallback) {\n            this.callMethod('removeEventListener', eventName).catch((e) => {\n                // Ignore the error. There will be an error event fired that\n                // will trigger the error callback if they are listening.\n            });\n        }\n    }\n\n    /**\n     * A promise to load a new video.\n     *\n     * @promise LoadVideoPromise\n     * @fulfill {number} The video with this id successfully loaded.\n     * @reject {TypeError} The id was not a number.\n     */\n    /**\n     * Load a new video into this embed. The promise will be resolved if\n     * the video is successfully loaded, or it will be rejected if it could\n     * not be loaded.\n     *\n     * @param {number|object} options The id of the video or an object with embed options.\n     * @return {LoadVideoPromise}\n     */\n    loadVideo(options) {\n        return this.callMethod('loadVideo', options);\n    }\n\n    /**\n     * A promise to perform an action when the Player is ready.\n     *\n     * @todo document errors\n     * @promise LoadVideoPromise\n     * @fulfill {void}\n     */\n    /**\n     * Trigger a function when the player iframe has initialized. You do not\n     * need to wait for `ready` to trigger to begin adding event listeners\n     * or calling other methods.\n     *\n     * @return {ReadyPromise}\n     */\n    ready() {\n        const readyPromise = readyMap.get(this) || new Promise((resolve, reject) => {\n            reject(new Error('Unknown player. Probably unloaded.'));\n        });\n        return Promise.resolve(readyPromise);\n    }\n\n    /**\n     * A promise to add a cue point to the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point to use for removeCuePoint.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         video’s duration.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Add a cue point to the player.\n     *\n     * @param {number} time The time for the cue point.\n     * @param {object} [data] Arbitrary data to be returned with the cue point.\n     * @return {AddCuePointPromise}\n     */\n    addCuePoint(time, data = {}) {\n        return this.callMethod('addCuePoint', { time, data });\n    }\n\n    /**\n     * A promise to remove a cue point from the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point that was removed.\n     * @reject {InvalidCuePoint} The cue point with the specified id was not\n     *         found.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Remove a cue point from the video.\n     *\n     * @param {string} id The id of the cue point to remove.\n     * @return {RemoveCuePointPromise}\n     */\n    removeCuePoint(id) {\n        return this.callMethod('removeCuePoint', id);\n    }\n\n    /**\n     * A representation of a text track on a video.\n     *\n     * @typedef {Object} VimeoTextTrack\n     * @property {string} language The ISO language code.\n     * @property {string} kind The kind of track it is (captions or subtitles).\n     * @property {string} label The human‐readable label for the track.\n     */\n    /**\n     * A promise to enable a text track.\n     *\n     * @promise EnableTextTrackPromise\n     * @fulfill {VimeoTextTrack} The text track that was enabled.\n     * @reject {InvalidTrackLanguageError} No track was available with the\n     *         specified language.\n     * @reject {InvalidTrackError} No track was available with the specified\n     *         language and kind.\n     */\n    /**\n     * Enable the text track with the specified language, and optionally the\n     * specified kind (captions or subtitles).\n     *\n     * When set via the API, the track language will not change the viewer’s\n     * stored preference.\n     *\n     * @param {string} language The two‐letter language code.\n     * @param {string} [kind] The kind of track to enable (captions or subtitles).\n     * @return {EnableTextTrackPromise}\n     */\n    enableTextTrack(language, kind) {\n        if (!language) {\n            throw new TypeError('You must pass a language.');\n        }\n\n        return this.callMethod('enableTextTrack', {\n            language,\n            kind\n        });\n    }\n\n    /**\n     * A promise to disable the active text track.\n     *\n     * @promise DisableTextTrackPromise\n     * @fulfill {void} The track was disabled.\n     */\n    /**\n     * Disable the currently-active text track.\n     *\n     * @return {DisableTextTrackPromise}\n     */\n    disableTextTrack() {\n        return this.callMethod('disableTextTrack');\n    }\n\n    /**\n     * A promise to pause the video.\n     *\n     * @promise PausePromise\n     * @fulfill {void} The video was paused.\n     */\n    /**\n     * Pause the video if it’s playing.\n     *\n     * @return {PausePromise}\n     */\n    pause() {\n        return this.callMethod('pause');\n    }\n\n    /**\n     * A promise to play the video.\n     *\n     * @promise PlayPromise\n     * @fulfill {void} The video was played.\n     */\n    /**\n     * Play the video if it’s paused. **Note:** on iOS and some other\n     * mobile devices, you cannot programmatically trigger play. Once the\n     * viewer has tapped on the play button in the player, however, you\n     * will be able to use this function.\n     *\n     * @return {PlayPromise}\n     */\n    play() {\n        return this.callMethod('play');\n    }\n\n    /**\n     * A promise to unload the video.\n     *\n     * @promise UnloadPromise\n     * @fulfill {void} The video was unloaded.\n     */\n    /**\n     * Return the player to its initial state.\n     *\n     * @return {UnloadPromise}\n     */\n    unload() {\n        return this.callMethod('unload');\n    }\n\n    /**\n     * Cleanup the player and remove it from the DOM\n     *\n     * It won't be usable and a new one should be constructed\n     *  in order to do any operations.\n     *\n     * @return {Promise}\n     */\n    destroy() {\n        return new Promise((resolve) => {\n            readyMap.delete(this);\n            playerMap.delete(this.element);\n            if (this._originalElement) {\n                playerMap.delete(this._originalElement);\n                this._originalElement.removeAttribute('data-vimeo-initialized');\n            }\n            if (this.element && this.element.nodeName === 'IFRAME' && this.element.parentNode) {\n                this.element.parentNode.removeChild(this.element);\n            }\n            resolve();\n        });\n    }\n\n    /**\n     * A promise to get the autopause behavior of the video.\n     *\n     * @promise GetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Get the autopause behavior for this player.\n     *\n     * @return {GetAutopausePromise}\n     */\n    getAutopause() {\n        return this.get('autopause');\n    }\n\n    /**\n     * A promise to set the autopause behavior of the video.\n     *\n     * @promise SetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Enable or disable the autopause behavior of this player.\n     *\n     * By default, when another video is played in the same browser, this\n     * player will automatically pause. Unless you have a specific reason\n     * for doing so, we recommend that you leave autopause set to the\n     * default (`true`).\n     *\n     * @param {boolean} autopause\n     * @return {SetAutopausePromise}\n     */\n    setAutopause(autopause) {\n        return this.set('autopause', autopause);\n    }\n\n    /**\n     * A promise to get the buffered property of the video.\n     *\n     * @promise GetBufferedPromise\n     * @fulfill {Array} Buffered Timeranges converted to an Array.\n     */\n    /**\n     * Get the buffered property of the video.\n     *\n     * @return {GetBufferedPromise}\n     */\n    getBuffered() {\n        return this.get('buffered');\n    }\n\n    /**\n     * A promise to get the color of the player.\n     *\n     * @promise GetColorPromise\n     * @fulfill {string} The hex color of the player.\n     */\n    /**\n     * Get the color for this player.\n     *\n     * @return {GetColorPromise}\n     */\n    getColor() {\n        return this.get('color');\n    }\n\n    /**\n     * A promise to set the color of the player.\n     *\n     * @promise SetColorPromise\n     * @fulfill {string} The color was successfully set.\n     * @reject {TypeError} The string was not a valid hex or rgb color.\n     * @reject {ContrastError} The color was set, but the contrast is\n     *         outside of the acceptable range.\n     * @reject {EmbedSettingsError} The owner of the player has chosen to\n     *         use a specific color.\n     */\n    /**\n     * Set the color of this player to a hex or rgb string. Setting the\n     * color may fail if the owner of the video has set their embed\n     * preferences to force a specific color.\n     *\n     * @param {string} color The hex or rgb color string to set.\n     * @return {SetColorPromise}\n     */\n    setColor(color) {\n        return this.set('color', color);\n    }\n\n    /**\n     * A representation of a cue point.\n     *\n     * @typedef {Object} VimeoCuePoint\n     * @property {number} time The time of the cue point.\n     * @property {object} data The data passed when adding the cue point.\n     * @property {string} id The unique id for use with removeCuePoint.\n     */\n    /**\n     * A promise to get the cue points of a video.\n     *\n     * @promise GetCuePointsPromise\n     * @fulfill {VimeoCuePoint[]} The cue points added to the video.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Get an array of the cue points added to the video.\n     *\n     * @return {GetCuePointsPromise}\n     */\n    getCuePoints() {\n        return this.get('cuePoints');\n    }\n\n    /**\n     * A promise to get the current time of the video.\n     *\n     * @promise GetCurrentTimePromise\n     * @fulfill {number} The current time in seconds.\n     */\n    /**\n     * Get the current playback position in seconds.\n     *\n     * @return {GetCurrentTimePromise}\n     */\n    getCurrentTime() {\n        return this.get('currentTime');\n    }\n\n    /**\n     * A promise to set the current time of the video.\n     *\n     * @promise SetCurrentTimePromise\n     * @fulfill {number} The actual current time that was set.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         video’s duration.\n     */\n    /**\n     * Set the current playback position in seconds. If the player was\n     * paused, it will remain paused. Likewise, if the player was playing,\n     * it will resume playing once the video has buffered.\n     *\n     * You can provide an accurate time and the player will attempt to seek\n     * to as close to that time as possible. The exact time will be the\n     * fulfilled value of the promise.\n     *\n     * @param {number} currentTime\n     * @return {SetCurrentTimePromise}\n     */\n    setCurrentTime(currentTime) {\n        return this.set('currentTime', currentTime);\n    }\n\n    /**\n     * A promise to get the duration of the video.\n     *\n     * @promise GetDurationPromise\n     * @fulfill {number} The duration in seconds.\n     */\n    /**\n     * Get the duration of the video in seconds. It will be rounded to the\n     * nearest second before playback begins, and to the nearest thousandth\n     * of a second after playback begins.\n     *\n     * @return {GetDurationPromise}\n     */\n    getDuration() {\n        return this.get('duration');\n    }\n\n    /**\n     * A promise to get the ended state of the video.\n     *\n     * @promise GetEndedPromise\n     * @fulfill {boolean} Whether or not the video has ended.\n     */\n    /**\n     * Get the ended state of the video. The video has ended if\n     * `currentTime === duration`.\n     *\n     * @return {GetEndedPromise}\n     */\n    getEnded() {\n        return this.get('ended');\n    }\n\n    /**\n     * A promise to get the loop state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the player is set to loop.\n     */\n    /**\n     * Get the loop state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n    getLoop() {\n        return this.get('loop');\n    }\n\n    /**\n     * A promise to set the loop state of the player.\n     *\n     * @promise SetLoopPromise\n     * @fulfill {boolean} The loop state that was set.\n     */\n    /**\n     * Set the loop state of the player. When set to `true`, the player\n     * will start over immediately once playback ends.\n     *\n     * @param {boolean} loop\n     * @return {SetLoopPromise}\n     */\n    setLoop(loop) {\n        return this.set('loop', loop);\n    }\n\n\n    /**\n     * A promise to set the muted state of the player.\n     *\n     * @promise SetMutedPromise\n     * @fulfill {boolean} The muted state that was set.\n     */\n    /**\n     * Set the muted state of the player. When set to `true`, the player\n     * volume will be muted.\n     *\n     * @param {boolean} muted\n     * @return {SetMutedPromise}\n     */\n    setMuted(muted) {\n        return this.set('muted', muted);\n    }\n\n    /**\n     * A promise to get the muted state of the player.\n     *\n     * @promise GetMutedPromise\n     * @fulfill {boolean} Whether or not the player is muted.\n     */\n    /**\n     * Get the muted state of the player.\n     *\n     * @return {GetMutedPromise}\n     */\n    getMuted() {\n        return this.get('muted');\n    }\n\n    /**\n     * A promise to get the paused state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the video is paused.\n     */\n    /**\n     * Get the paused state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n    getPaused() {\n        return this.get('paused');\n    }\n\n    /**\n     * A promise to get the playback rate of the player.\n     *\n     * @promise GetPlaybackRatePromise\n     * @fulfill {number} The playback rate of the player on a scale from 0.5 to 2.\n     */\n    /**\n     * Get the playback rate of the player on a scale from `0.5` to `2`.\n     *\n     * @return {GetPlaybackRatePromise}\n     */\n    getPlaybackRate() {\n        return this.get('playbackRate');\n    }\n\n    /**\n     * A promise to set the playbackrate of the player.\n     *\n     * @promise SetPlaybackRatePromise\n     * @fulfill {number} The playback rate was set.\n     * @reject {RangeError} The playback rate was less than 0.5 or greater than 2.\n     */\n    /**\n     * Set the playback rate of the player on a scale from `0.5` to `2`. When set\n     * via the API, the playback rate will not be synchronized to other\n     * players or stored as the viewer's preference.\n     *\n     * @param {number} playbackRate\n     * @return {SetPlaybackRatePromise}\n     */\n    setPlaybackRate(playbackRate) {\n        return this.set('playbackRate', playbackRate);\n    }\n\n    /**\n     * A promise to get the played property of the video.\n     *\n     * @promise GetPlayedPromise\n     * @fulfill {Array} Played Timeranges converted to an Array.\n     */\n    /**\n     * Get the played property of the video.\n     *\n     * @return {GetPlayedPromise}\n     */\n    getPlayed() {\n        return this.get('played');\n    }\n\n    /**\n     * A promise to get the seekable property of the video.\n     *\n     * @promise GetSeekablePromise\n     * @fulfill {Array} Seekable Timeranges converted to an Array.\n     */\n    /**\n     * Get the seekable property of the video.\n     *\n     * @return {GetSeekablePromise}\n     */\n    getSeekable() {\n        return this.get('seekable');\n    }\n\n    /**\n     * A promise to get the seeking property of the player.\n     *\n     * @promise GetSeekingPromise\n     * @fulfill {boolean} Whether or not the player is currently seeking.\n     */\n    /**\n     * Get if the player is currently seeking.\n     *\n     * @return {GetSeekingPromise}\n     */\n    getSeeking() {\n        return this.get('seeking');\n    }\n\n    /**\n     * A promise to get the text tracks of a video.\n     *\n     * @promise GetTextTracksPromise\n     * @fulfill {VimeoTextTrack[]} The text tracks associated with the video.\n     */\n    /**\n     * Get an array of the text tracks that exist for the video.\n     *\n     * @return {GetTextTracksPromise}\n     */\n    getTextTracks() {\n        return this.get('textTracks');\n    }\n\n    /**\n     * A promise to get the embed code for the video.\n     *\n     * @promise GetVideoEmbedCodePromise\n     * @fulfill {string} The `<iframe>` embed code for the video.\n     */\n    /**\n     * Get the `<iframe>` embed code for the video.\n     *\n     * @return {GetVideoEmbedCodePromise}\n     */\n    getVideoEmbedCode() {\n        return this.get('videoEmbedCode');\n    }\n\n    /**\n     * A promise to get the id of the video.\n     *\n     * @promise GetVideoIdPromise\n     * @fulfill {number} The id of the video.\n     */\n    /**\n     * Get the id of the video.\n     *\n     * @return {GetVideoIdPromise}\n     */\n    getVideoId() {\n        return this.get('videoId');\n    }\n\n    /**\n     * A promise to get the title of the video.\n     *\n     * @promise GetVideoTitlePromise\n     * @fulfill {number} The title of the video.\n     */\n    /**\n     * Get the title of the video.\n     *\n     * @return {GetVideoTitlePromise}\n     */\n    getVideoTitle() {\n        return this.get('videoTitle');\n    }\n\n    /**\n     * A promise to get the native width of the video.\n     *\n     * @promise GetVideoWidthPromise\n     * @fulfill {number} The native width of the video.\n     */\n    /**\n     * Get the native width of the currently‐playing video. The width of\n     * the highest‐resolution available will be used before playback begins.\n     *\n     * @return {GetVideoWidthPromise}\n     */\n    getVideoWidth() {\n        return this.get('videoWidth');\n    }\n\n    /**\n     * A promise to get the native height of the video.\n     *\n     * @promise GetVideoHeightPromise\n     * @fulfill {number} The native height of the video.\n     */\n    /**\n     * Get the native height of the currently‐playing video. The height of\n     * the highest‐resolution available will be used before playback begins.\n     *\n     * @return {GetVideoHeightPromise}\n     */\n    getVideoHeight() {\n        return this.get('videoHeight');\n    }\n\n    /**\n     * A promise to get the vimeo.com url for the video.\n     *\n     * @promise GetVideoUrlPromise\n     * @fulfill {number} The vimeo.com url for the video.\n     * @reject {PrivacyError} The url isn’t available because of the video’s privacy setting.\n     */\n    /**\n     * Get the vimeo.com url for the video.\n     *\n     * @return {GetVideoUrlPromise}\n     */\n    getVideoUrl() {\n        return this.get('videoUrl');\n    }\n\n    /**\n     * A promise to get the volume level of the player.\n     *\n     * @promise GetVolumePromise\n     * @fulfill {number} The volume level of the player on a scale from 0 to 1.\n     */\n    /**\n     * Get the current volume level of the player on a scale from `0` to `1`.\n     *\n     * Most mobile devices do not support an independent volume from the\n     * system volume. In those cases, this method will always return `1`.\n     *\n     * @return {GetVolumePromise}\n     */\n    getVolume() {\n        return this.get('volume');\n    }\n\n    /**\n     * A promise to set the volume level of the player.\n     *\n     * @promise SetVolumePromise\n     * @fulfill {number} The volume was set.\n     * @reject {RangeError} The volume was less than 0 or greater than 1.\n     */\n    /**\n     * Set the volume of the player on a scale from `0` to `1`. When set\n     * via the API, the volume level will not be synchronized to other\n     * players or stored as the viewer’s preference.\n     *\n     * Most mobile devices do not support setting the volume. An error will\n     * *not* be triggered in that situation.\n     *\n     * @param {number} volume\n     * @return {SetVolumePromise}\n     */\n    setVolume(volume) {\n        return this.set('volume', volume);\n    }\n}\n\n// Setup embed only if this is not a node environment\nif (!isNode) {\n    initializeEmbeds();\n    resizeEmbeds();\n}\n\nexport default Player;\n"],"names":["isNode","global","toString","call","getMethodName","prop","type","indexOf","toLowerCase","substr","toUpperCase","isDomElement","element","Boolean","nodeType","ownerDocument","defaultView","isInteger","value","isNaN","parseFloat","isFinite","Math","floor","isVimeoUrl","url","test","getVimeoUrl","oEmbedParameters","id","idOrUrl","Error","replace","TypeError","arrayIndexOfSupport","Array","prototype","postMessageSupport","window","postMessage","self","WeakMap","hasOwnProperty","Object","defineProperty","object","name","configurable","writable","genId","arguments","length","key","checkInstance","isObject","entry","_id","x","methodName","prefix","rand","random","substring","this","UMD","context","definition","module","exports","DEF","builtInProp","cycle","scheduling_queue","ToString","timer","setImmediate","fn","setTimeout","obj","val","config","err","Queue","first","last","item","Item","next","add","drain","f","schedule","isThenable","o","_then","o_type","then","notify","i","chain","notifyIsolated","state","success","failure","cb","ret","reject","msg","promise","resolve","triggered","def","def_wrapper","MakeDefWrapper","$resolve$","apply","$reject$","iteratePromises","Constructor","arr","resolver","rejecter","idx","IIFE","$resolver$","MakeDef","Promise","executor","__NPO__","constructor","extractChain","push","$catch$","publicResolve","publicReject","PromisePrototype","Promise$resolve","Promise$reject","Promise$all","len","msgs","count","Promise$race","callbackMap","storeCallback","player","callback","playerCallbacks","get","set","getCallbacks","removeCallback","index","splice","shiftCallbacks","shift","swapCallbacks","oldElement","newElement","delete","getOEmbedParameters","defaults","reduce","params","param","getAttribute","createEmbed","html","querySelector","div","document","createElement","innerHTML","appendChild","firstChild","setAttribute","getOEmbedData","videoUrl","encodeURIComponent","xhr","XDomainRequest","XMLHttpRequest","open","onload","status","json","JSON","parse","responseText","domain_status_code","error","onerror","send","initializeEmbeds","parent","elements","slice","querySelectorAll","handleError","console","forEach","data","catch","resizeEmbeds","VimeoPlayerResizeEmbeds_","onMessage","event","origin","iframes","contentWindow","source","space","parentElement","style","paddingBottom","bottom","addEventListener","attachEvent","parseMessageData","warn","method","message","undefined","ieVersion","navigator","userAgent","stringify","processData","callbacks","promises","e","playerMap","readyMap","Player","options","jQuery","getElementById","win","nodeName","iframe","has","readyPromise","isError","isReadyError","isReadyEvent","isPingResponse","_originalElement","args","ready","eventName","callMethod","lastCallback","time","language","kind","removeAttribute","parentNode","removeChild","autopause","color","currentTime","loop","muted","playbackRate","volume"],"mappings":"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"}